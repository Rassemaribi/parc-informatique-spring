2024-08-27T10:26:33.278+01:00  INFO 30484 --- [parcinformatique] [main] c.f.p.ParcinformatiqueApplicationTests   : Starting ParcinformatiqueApplicationTests using Java 21.0.2 with PID 30484 (started by RACEM in C:\Users\RACEM\Documents\GitHub\racem\parc-informatique-spring)
2024-08-27T10:26:33.290+01:00  INFO 30484 --- [parcinformatique] [main] c.f.p.ParcinformatiqueApplicationTests   : No active profile set, falling back to 1 default profile: "default"
2024-08-27T10:26:34.296+01:00  INFO 30484 --- [parcinformatique] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27T10:26:34.381+01:00  INFO 30484 --- [parcinformatique] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 78 ms. Found 14 JPA repository interfaces.
2024-08-27T10:26:35.268+01:00  INFO 30484 --- [parcinformatique] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27T10:26:35.380+01:00  INFO 30484 --- [parcinformatique] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-08-27T10:26:35.425+01:00  INFO 30484 --- [parcinformatique] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-08-27T10:26:35.749+01:00  INFO 30484 --- [parcinformatique] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27T10:26:35.788+01:00  INFO 30484 --- [parcinformatique] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-08-27T10:26:36.559+01:00  INFO 30484 --- [parcinformatique] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 1ff92c90-e483-4e9b-8492-191e0f0ec9c2
2024-08-27T10:26:36.561+01:00  INFO 30484 --- [parcinformatique] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-08-27T10:26:38.074+01:00  INFO 30484 --- [parcinformatique] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27T10:26:38.337+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : create table abonnements (id bigint identity not null, cle varchar(255) not null, date_debut date not null, date_fin date not null, fournisseur varchar(255) not null, nom varchar(255) not null, assigned_user_id bigint, primary key (id))
2024-08-27T10:26:38.410+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : create table demandes_acquisition_archive (id bigint identity not null, date_request datetime2(6), date_response datetime2(6), demande_description varchar(255), reference varchar(255), rejection_reason varchar(255), status varchar(255) check (status in ('CREATED','PENDING','DONE','REFUSE')), responded_by_user_id bigint, requested_by_user_id bigint, primary key (id))
2024-08-27T10:26:38.468+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : create table demandes_reparation_archive (id bigint identity not null, active bit, date_request datetime2(6), date_response datetime2(6), demande_description varchar(255), estimation int, rejet_motif varchar(255), reference varchar(255), status varchar(255) check (status in ('CREATED','PENDING','DONE','REFUSE')), actif_id bigint, responded_by_user_id bigint, requested_by_user_id bigint, primary key (id))
2024-08-27T10:26:38.552+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : alter table users drop constraint UKr43af9ap4edm43mmtq01oddj6
2024-08-27T10:26:38.623+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : alter table users add constraint UKr43af9ap4edm43mmtq01oddj6 unique (username)
2024-08-27T10:26:38.660+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : alter table abonnements add constraint FKl184adriq415s3frwih4q2krm foreign key (assigned_user_id) references users
2024-08-27T10:26:39.168+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : alter table demandes_acquisition_archive add constraint FKohcl3nxlhvbsd4ee2u1tdrodf foreign key (responded_by_user_id) references users
2024-08-27T10:26:39.211+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : alter table demandes_acquisition_archive add constraint FKnoh4rvgulbydct0rq0ptvox39 foreign key (requested_by_user_id) references users
2024-08-27T10:26:39.551+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : alter table demandes_reparation_archive add constraint FK878xb9yrp1kuiwnxpkdykr7rl foreign key (actif_id) references actifs
2024-08-27T10:26:39.593+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : alter table demandes_reparation_archive add constraint FKndgcg6ik4xse6br2x85k27h2v foreign key (responded_by_user_id) references users
2024-08-27T10:26:39.636+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : alter table demandes_reparation_archive add constraint FKseutuflcmmtj7kitr0c8tf6v9 foreign key (requested_by_user_id) references users
2024-08-27T10:26:40.034+01:00  INFO 30484 --- [parcinformatique] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27T10:26:40.575+01:00  INFO 30484 --- [parcinformatique] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-08-27T10:26:40.997+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.ActifController.getAllActifs()
2024-08-27T10:26:41.017+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.ActifController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.ActifController.getAllActifs()]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.034+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.ActifController.archiveActif(java.lang.Long)
2024-08-27T10:26:41.034+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.ActifController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.ActifController.archiveActif(java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.035+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.ActifController.createActifs(java.util.List,java.lang.Long)
2024-08-27T10:26:41.035+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.ActifController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.ActifController.createActifs(java.util.List,java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.035+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.ActifController.updateActif(java.lang.Long,com.freedomofdev.parcinformatique.entity.Actif)
2024-08-27T10:26:41.035+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.ActifController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.ActifController.updateActif(java.lang.Long,com.freedomofdev.parcinformatique.entity.Actif)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.097+01:00 TRACE 30484 --- [parcinformatique] [main] o.s.c.a.AnnotationCacheOperationSource   : Adding cacheable method 'saveInputCriteria' with attribute: [Builder[public com.freedomofdev.parcinformatique.entity.InputPayload com.freedomofdev.parcinformatique.service.AiModelService.saveInputCriteria(com.freedomofdev.parcinformatique.entity.InputPayload)] caches=[inputCriteriaCache] | key='#inputPayload.hashCode()' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='' | unless='' | sync='false']
2024-08-27T10:26:41.099+01:00 TRACE 30484 --- [parcinformatique] [main] o.s.c.a.AnnotationCacheOperationSource   : Adding cacheable method 'getRecommendations' with attribute: [Builder[public com.freedomofdev.parcinformatique.entity.AiModelResponse com.freedomofdev.parcinformatique.service.AiModelService.getRecommendations(com.freedomofdev.parcinformatique.entity.InputPayload)] caches=[recommendationsCache] | key='#payload.hashCode()' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='' | unless='' | sync='false']
2024-08-27T10:26:41.131+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.updateCategory(java.lang.Long,com.freedomofdev.parcinformatique.entity.Categorie)
2024-08-27T10:26:41.132+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.CategorieController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.updateCategory(java.lang.Long,com.freedomofdev.parcinformatique.entity.Categorie)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.133+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.getCategoryById(java.lang.Long)
2024-08-27T10:26:41.133+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.CategorieController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.getCategoryById(java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.133+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.getAllCategories()
2024-08-27T10:26:41.134+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.CategorieController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.getAllCategories()]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.134+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.createCategory(com.freedomofdev.parcinformatique.entity.Categorie)
2024-08-27T10:26:41.134+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.CategorieController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.createCategory(com.freedomofdev.parcinformatique.entity.Categorie)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.134+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.deleteCategory(java.lang.Long)
2024-08-27T10:26:41.134+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.CategorieController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.CategorieController.deleteCategory(java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.485+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.acceptDemandeAcquisition(java.lang.Long,java.lang.Long)
2024-08-27T10:26:41.485+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.acceptDemandeAcquisition(java.lang.Long,java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.488+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.rejectDemandeAcquisition(java.lang.Long,java.lang.String,java.lang.Long)
2024-08-27T10:26:41.488+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.rejectDemandeAcquisition(java.lang.Long,java.lang.String,java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.489+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.getAllDemandeAcquisitions()
2024-08-27T10:26:41.489+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.getAllDemandeAcquisitions()]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.489+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.notifyDemandeAcquisition(java.lang.Long)
2024-08-27T10:26:41.490+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.notifyDemandeAcquisition(java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.490+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.notifyProblemAcquiringActif(java.lang.Long)
2024-08-27T10:26:41.491+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeAcquisitionController.notifyProblemAcquiringActif(java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.719+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.finirReparationAvecEchec(java.lang.Long,java.lang.Boolean)
2024-08-27T10:26:41.720+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeReparationController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.finirReparationAvecEchec(java.lang.Long,java.lang.Boolean)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.723+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.acceptDemandeReparation(java.lang.Long,java.lang.Long,java.lang.Integer)
2024-08-27T10:26:41.723+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeReparationController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.acceptDemandeReparation(java.lang.Long,java.lang.Long,java.lang.Integer)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.724+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.rejectDemandeReparation(java.lang.Long,java.lang.String,java.lang.Long)
2024-08-27T10:26:41.724+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeReparationController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.rejectDemandeReparation(java.lang.Long,java.lang.String,java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.724+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.finirReparationAvecSucces(java.lang.Long)
2024-08-27T10:26:41.725+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeReparationController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.finirReparationAvecSucces(java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.726+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.getAllDemandeReparations()
2024-08-27T10:26:41.726+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.DemandeReparationController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.DemandeReparationController.getAllDemandeReparations()]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.760+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.assignAbonnementToUser(java.lang.Long,java.lang.Long)
2024-08-27T10:26:41.761+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.UserController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.assignAbonnementToUser(java.lang.Long,java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.763+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.removeAbonnementFromUser(java.lang.Long,java.lang.Long)
2024-08-27T10:26:41.764+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.UserController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.removeAbonnementFromUser(java.lang.Long,java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.765+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.removeActifFromUser(java.lang.Long,java.lang.Long)
2024-08-27T10:26:41.765+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.UserController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.removeActifFromUser(java.lang.Long,java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.765+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.assignActifToUser(java.lang.Long,java.lang.Long)
2024-08-27T10:26:41.765+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.UserController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.assignActifToUser(java.lang.Long,java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.766+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.deactivateUsers(java.util.List)
2024-08-27T10:26:41.766+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.UserController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.deactivateUsers(java.util.List)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.766+01:00 DEBUG 30484 --- [parcinformatique] [main] .PrePostAnnotationSecurityMetadataSource : @org.springframework.security.access.prepost.PreAuthorize("hasAuthority(@dsiGroupId)") found on specific method: public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.deleteUserAndUnassignActifs(java.lang.Long)
2024-08-27T10:26:41.766+01:00 DEBUG 30484 --- [parcinformatique] [main] m.DelegatingMethodSecurityMetadataSource : Caching method [CacheKey[com.freedomofdev.parcinformatique.controller.UserController; public org.springframework.http.ResponseEntity com.freedomofdev.parcinformatique.controller.UserController.deleteUserAndUnassignActifs(java.lang.Long)]] with attributes [[authorize: 'hasAuthority(@dsiGroupId)', filter: 'null', filterTarget: 'null']]
2024-08-27T10:26:41.944+01:00 DEBUG 30484 --- [parcinformatique] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-08-27T10:26:42.495+01:00 DEBUG 30484 --- [parcinformatique] [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/auth/**']
2024-08-27T10:26:42.496+01:00 DEBUG 30484 --- [parcinformatique] [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/api/messages/**']
2024-08-27T10:26:42.496+01:00 DEBUG 30484 --- [parcinformatique] [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='api/demandeReparationArchive']
2024-08-27T10:26:42.496+01:00 DEBUG 30484 --- [parcinformatique] [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='api/demandeAcquisitionArchive']
2024-08-27T10:26:42.496+01:00 DEBUG 30484 --- [parcinformatique] [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [permitAll] for Ant [pattern='/chat-websocket/**']
2024-08-27T10:26:42.496+01:00 DEBUG 30484 --- [parcinformatique] [main] edFilterInvocationSecurityMetadataSource : Adding web access control expression [authenticated] for any request
2024-08-27T10:26:42.506+01:00  INFO 30484 --- [parcinformatique] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5ca29f17, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@66f965a, org.springframework.security.web.context.SecurityContextHolderFilter@7b78c40d, org.springframework.security.web.header.HeaderWriterFilter@72ce2982, org.springframework.web.filter.CorsFilter@18ca65ea, org.springframework.security.web.csrf.CsrfFilter@64a2966a, org.springframework.security.web.authentication.logout.LogoutFilter@27cd156a, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4d3a7025, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3564caf8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@ce15aa, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@140a2add, org.springframework.security.web.access.ExceptionTranslationFilter@5c00b341, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@66be0ea]
2024-08-27T10:26:42.991+01:00  INFO 30484 --- [parcinformatique] [main] o.s.m.s.b.SimpleBrokerMessageHandler     : Starting...
2024-08-27T10:26:42.992+01:00  INFO 30484 --- [parcinformatique] [main] o.s.m.s.b.SimpleBrokerMessageHandler     : BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@59ea4ca5]]
2024-08-27T10:26:42.993+01:00  INFO 30484 --- [parcinformatique] [main] o.s.m.s.b.SimpleBrokerMessageHandler     : Started.
2024-08-27T10:26:43.001+01:00  INFO 30484 --- [parcinformatique] [main] c.f.p.ParcinformatiqueApplicationTests   : Started ParcinformatiqueApplicationTests in 10.14 seconds (process running for 11.648)
2024-08-27T10:26:43.497+01:00  INFO 30484 --- [parcinformatique] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.freedomofdev.parcinformatique.test.SchedulerTest]: SchedulerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27T10:26:43.505+01:00  INFO 30484 --- [parcinformatique] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.freedomofdev.parcinformatique.ParcinformatiqueApplication for test class com.freedomofdev.parcinformatique.test.SchedulerTest
2024-08-27T10:26:43.619+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : select a1_0.reference,count_big(dr1_0.id) from demandes_reparation dr1_0 join actifs a1_0 on a1_0.id=dr1_0.actif_id group by a1_0.reference
2024-08-27T10:26:43.705+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : select count_big(dr1_0.id) from demandes_reparation dr1_0 join actifs a1_0 on a1_0.id=dr1_0.actif_id group by a1_0.reference
2024-08-27T10:26:43.784+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : select top (?) a1_0.id,a1_0.assigned_user_id,a1_0.categorie_id,a1_0.commentaires,a1_0.dsi_id,a1_0.date_achat,a1_0.date_assignation,a1_0.etat,a1_0.garantie,a1_0.marque,a1_0.modele,a1_0.nom,a1_0.numero_serie,a1_0.partage,a1_0.reference from actifs a1_0 where a1_0.reference=?
2024-08-27T10:26:43.839+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : select u1_0.id,u1_0.active,u1_0.email,u1_0.nom,u1_0.phone_number,u1_0.prenom,ug1_0.user_id,ug1_0.user_groups from users u1_0 left join user_user_groups ug1_0 on u1_0.id=ug1_0.user_id where u1_0.id=?
2024-08-27T10:26:43.891+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : select dr1_0.actif_id,dr1_0.id,dr1_0.active,dr1_0.date_request,dr1_0.date_response,dr1_0.demande_description,dr1_0.estimation,dr1_0.rejet_motif,dr1_0.reference,rhb1_0.id,rhb1_0.active,rhb1_0.email,rhb1_0.nom,rhb1_0.phone_number,rhb1_0.prenom,rrb1_0.id,rrb1_0.active,rrb1_0.email,rrb1_0.nom,rrb1_0.phone_number,rrb1_0.prenom,dr1_0.status from demandes_reparation dr1_0 left join users rhb1_0 on rhb1_0.id=dr1_0.responded_by_user_id left join users rrb1_0 on rrb1_0.id=dr1_0.requested_by_user_id where dr1_0.actif_id=?
2024-08-27T10:26:44.536+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : select top (?) a1_0.id,a1_0.assigned_user_id,a1_0.categorie_id,a1_0.commentaires,a1_0.dsi_id,a1_0.date_achat,a1_0.date_assignation,a1_0.etat,a1_0.garantie,a1_0.marque,a1_0.modele,a1_0.nom,a1_0.numero_serie,a1_0.partage,a1_0.reference from actifs a1_0 where a1_0.reference=?
2024-08-27T10:26:44.611+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : select u1_0.id,u1_0.active,u1_0.email,u1_0.nom,u1_0.phone_number,u1_0.prenom,ug1_0.user_id,ug1_0.user_groups from users u1_0 left join user_user_groups ug1_0 on u1_0.id=ug1_0.user_id where u1_0.id=?
2024-08-27T10:26:44.649+01:00 DEBUG 30484 --- [parcinformatique] [main] org.hibernate.SQL                        : select dr1_0.actif_id,dr1_0.id,dr1_0.active,dr1_0.date_request,dr1_0.date_response,dr1_0.demande_description,dr1_0.estimation,dr1_0.rejet_motif,dr1_0.reference,rhb1_0.id,rhb1_0.active,rhb1_0.email,rhb1_0.nom,rhb1_0.phone_number,rhb1_0.prenom,rrb1_0.id,rrb1_0.active,rrb1_0.email,rrb1_0.nom,rrb1_0.phone_number,rrb1_0.prenom,dr1_0.status from demandes_reparation dr1_0 left join users rhb1_0 on rhb1_0.id=dr1_0.responded_by_user_id left join users rrb1_0 on rrb1_0.id=dr1_0.requested_by_user_id where dr1_0.actif_id=?
2024-08-27T10:26:44.945+01:00  INFO 30484 --- [parcinformatique] [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler     : Stopping...
2024-08-27T10:26:44.945+01:00  INFO 30484 --- [parcinformatique] [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler     : BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@59ea4ca5]]
2024-08-27T10:26:44.945+01:00  INFO 30484 --- [parcinformatique] [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler     : Stopped.
2024-08-27T10:26:44.948+01:00  INFO 30484 --- [parcinformatique] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27T10:26:44.950+01:00  INFO 30484 --- [parcinformatique] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-08-27T10:26:44.956+01:00  INFO 30484 --- [parcinformatique] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
